# 🏠 Mini Project 2 – IoT 스마트홈 시스템

## 📌 프로젝트 개요
STM32 보드와 라즈베리파이를 기반으로 WiFi, Bluetooth, MariaDB를 연동한 **IoT 스마트홈 시스템**을 구현한 프로젝트입니다.  
센서 데이터를 실시간으로 수집·저장·모니터링하고, 자동 환기 및 안전 알람 기능을 통해 **주거 안전성과 편의성**을 동시에 확보했습니다.  

---

## 🔧 개발 기간
- **2025.08.22 ~ 2025.08.26 (5일)**

---

## ⚙️ 주요 기능
- **센서 데이터 수집 & 서버 연동**
  - STM32 ↔ 라즈베리파이 서버 간 WiFi/Bluetooth 통신  
  - MariaDB에 실시간 데이터 저장  
- **시간·날씨 기반 제어**
  - WiFi 모듈로 NTP 서버 및 기상청 서버와 주기적 통신  
  - 기상정보 기반 자동 환기 기능 구현  
- **FreeRTOS 기반 멀티태스킹**
  - 시간 관리, 센서 데이터 수집, 통신 Task 병렬 실행  
  - WiFi 관련 Task 간 **Mutex 적용** → 충돌 방지  
- **실내 환경 모니터링**
  - 온습도 + PIR 센서 → 실시간 모니터링 및 제어  
- **안전 알람 시스템**
  - 가스 / 화염 / 진동 / PIR 센서 → 이상 상황 감지 시 라즈베리파이 서버 전송 & 사용자 알림  

---

## 🛠️ 개발 환경 및 도구
- **Hardware** : STM32 Nucleo-F411RE, Raspberry Pi, WiFi 모듈, Bluetooth 모듈, DHT11 온습도 센서, PIR 센서, 가스/화염/진동 센서, LED, Fan  
- **Software** : STM32CubeIDE, FreeRTOS, MariaDB, C (HAL Driver), Python (서버 측)  

---

## 💡 사용 기술
C / STM32 / FreeRTOS / UART / Mutex / I2C / GPIO / WiFi / Bluetooth / MariaDB / Sensor / NTP / Weather API  

---

## 🔄 펌웨어 동작 원리
1. **시스템 초기화**  
   - FreeRTOS Task 생성 (시간 관리, 센서 수집, 통신, 알람)  

2. **센서 데이터 수집**  
   - DHT11, PIR, 가스, 화염, 진동 센서 주기적 읽기  
   - 이상 감지 시 이벤트 발생 처리  

3. **데이터 전송 및 저장**  
   - WiFi/Bluetooth 모듈 → 라즈베리파이 서버 전송  
   - MariaDB에 센서 데이터 실시간 저장  

4. **자동 제어 기능**  
   - 기상청 API 기반 날씨 데이터 수신  
   - 조건 만족 시 Fan/LED 자동 동작  

5. **안전 알람**  
   - 센서 이상 발생 시 → 서버 알림 전송 & 사용자 피드백  

---

## 📈 개발 성과
- WiFi·Bluetooth + MariaDB 연동 → **실시간 데이터 수집·저장·모니터링 가능**  
- FreeRTOS + Mutex 적용 → **안정적 멀티태스킹 보장**  
- 자동 환기 및 온습도 제어 → **스마트홈 편의성과 에너지 효율성 향상**  
- 가스·화재·진동·침입(PIR) 알람 시스템 구축 → **주거 안전성 강화**  
- 센서·네트워크·DB 통합 아키텍처 검증 → **조명/가전 제어 등 확장성 확보**  

---

## 📸 시스템 블록 다이어그램
```plaintext
   +-------------------+         +------------------+
   |   NTP / Weather   |  WiFi   |   Raspberry Pi   |
   |       Server      | <-----> |   (MariaDB)      |
   +-------------------+         +------------------+
                                       ^
                                       |
                           WiFi / Bluetooth 통신
                                       |
        +------------------------------+------------------------------+
        |                           STM32                             |
        |                      (FreeRTOS 기반)                       |
        +-------+-----------+-----------+-----------+-----------------+
                |           |           |           | 
              DHT11       PIR       Gas/Flame    Vibration
           (온습도)    (인체감지)   (가스/화재)   (진동센서)
                |
             자동제어 (Fan, LED)
